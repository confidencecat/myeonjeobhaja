# 프로젝트 현재 구조 및 기능 명세

## 1. 프로젝트 개요

- **목표:** AI 면접 연습 웹 애플리케이션
- **기술 스택:** React, Vite, TypeScript, Tailwind CSS
- **핵심 백엔드:** Supabase (인증, 데이터베이스)

## 2. 구현된 기능

### Supabase 인증
- **회원가입:**
  - 이메일, 비밀번호, 이름으로 회원가입을 요청합니다.
  - Supabase의 이메일 인증 기능이 활성화되어 있어, 가입 시 인증 메일이 자동으로 발송됩니다.
  - 이미 가입된 이메일로 다시 가입을 시도할 경우, "이미 가입된 이메일입니다."라는 에러 메시지를 표시합니다.
- **로그인:**
  - 이메일, 비밀번호로 로그인을 수행합니다.
  - 이메일 인증을 완료하지 않은 사용자가 로그인을 시도하면, "Email not confirmed"라는 안내 메시지를 표시합니다.
  - 로그인 성공 시, 홈페이지로 리디렉션됩니다.
- **로그아웃:**
  - 사용자를 로그아웃시키고 세션을 종료합니다.
- **인증 상태 UI 반영:**
  - `Header` 컴포넌트는 사용자의 로그인 상태를 실시간으로 반영합니다.
  - **로그인 시:** 사용자 이메일과 "로그아웃" 버튼을 표시합니다.
  - **비로그인 시:** "로그인" 및 "회원가입" 버튼을 표시합니다.
- **라우트 보호:**
  - 로그인된 사용자만 접근할 수 있는 페이지(`/setup`, `/interview`, `/result`)는 `ProtectedRoute` 컴포넌트로 보호됩니다.
  - 비로그인 사용자가 해당 페이지에 접근 시, 로그인 페이지로 리디렉션됩니다.
  - 로그인된 사용자가 `/login` 또는 `/signup` 페이지에 접근 시, 홈페이지로 리디렉션됩니다.

## 3. 데이터 저장 위치 (Supabase)

- **인증 정보:**
  - 사용자의 이메일, 암호화된 비밀번호, 고유 ID 등은 Supabase의 `auth.users` 테이블에 저장됩니다.
  - 이 데이터는 Supabase 대시보드의 **`Authentication` -> `Users`** 메뉴에서 관리됩니다.
- **사용자 프로필 정보:**
  - 사용자의 이름, 이메일 등 추가 정보는 `public.user_profiles` 테이블에 저장됩니다.
  - **중요:** `auth.users` 테이블에 새로운 사용자가 추가되면, **데이터베이스 트리거**가 자동으로 `user_profiles` 테이블에 해당 사용자의 프로필을 생성합니다. 클라이언트 코드는 프로필 생성에 관여하지 않습니다.
- **기타 테이블:**
  - 향후 면접 기능 구현을 위해 `interview_sessions`, `interview_results`, `interview_qa` 테이블이 생성되어 있습니다.

## 4. 주요 파일 및 디렉토리 구조

- **`src/main.tsx`**: 앱의 진입점. `AuthProvider`가 최상위에서 앱을 감싸고 있습니다.
- **`src/App.tsx`**: 전체적인 라우팅 구조를 정의합니다.
- **`src/contexts/AuthContext.tsx`**:
  - **핵심 파일**로, 모든 Supabase 인증 로직(회원가입, 로그인, 로그아웃, 세션 관리 등)이 포함되어 있습니다.
  - `useAuth` 훅을 통해 앱 전역에서 인증 상태(사용자 정보, 로딩 상태 등)를 공유합니다.
- **`src/lib/supabaseClient.ts`**: Supabase 클라이언트를 초기화하고 export합니다.
- **`src/pages/`**: 각 페이지 컴포넌트가 위치합니다.
  - `LoginPage.tsx`, `SignUpPage.tsx`: 인증 관련 UI 및 폼 처리 로직.
  - `HomePage.tsx`: 메인 페이지.
  - `Interview...Page.tsx`, `ResultPage.tsx`: 향후 구현될 면접 관련 페이지.
- **`src/components/`**: 재사용 가능한 컴포넌트가 위치합니다.
  - `Header.tsx`: 로그인 상태에 따라 동적으로 변화하는 상단 헤더.
  - `ProtectedRoute.tsx`: 인증된 사용자만 특정 라우트에 접근할 수 있도록 보호하는 컴포넌트.

## 5. 환경 변수 (`.env`)

프로젝트 루트의 `.env` 파일에 다음 변수들이 설정되어 있어야 합니다.

- `VITE_SUPABASE_URL`: Supabase 프로젝트 URL
- `VITE_SUPABASE_ANON_KEY`: Supabase 프로젝트의 `anon` 공개 키

---
이 문서는 다음 작업자가 현재까지의 맥락을 이해하고 개발을 이어나가는 데 도움을 줄 것입니다.
